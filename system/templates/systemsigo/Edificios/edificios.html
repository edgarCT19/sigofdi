{% extends "systemsigo/base.html" %}
{% load static %}
{% block content %}

<div class="container mt-2">
  <div class="card p-4">
    <p class="text-center mb-2"  style="font-size: 18px;">Filtro de Edificios por Unidad Responsable</p>
    <hr class="text-center" style="color: var(--color-uacam-primary);">
    <form method="get" class="mt-3">
      <div class="material-input">
        <select name="unidad_id" id="unidad_id" onchange="this.form.submit()">
          <option value="">-- Todas las Unidades Responsables --</option>
          {% for unidad in unidades %}
            <option value="{{ unidad.id }}" {% if unidad.id == unidad_id %}selected{% endif %}>
              {{ unidad.nombre }}
            </option>
          {% endfor %}
        </select>
        <label for="unidad_id">Unidad Responsable</label>
        <span></span>
      </div>
    </form>
  </div>

  <div class="card mt-3">
    <div class="d-flex justify-content-end mt-2">
         <a href="{% url 'todos_edificios' %}"><button class="btn btn-secondary mx-2">Limpiar</button></a>
    </div>
    <div class="d-flex align-items-center justify-content-center">
      <div class="table-container">
        <table class="styled-table text-center">
          <thead class="table-light">
            <tr class="text-center">
                <th colSpan="12" className="table-title" style='background-color: var(--color-uacam-table-header); font-size: 15px;' >
                    Lista de edificios de las Unidades Responsables
                </th>
            </tr>
            <tr class="text-center">
              <th>#</th>
              <th>Nombre del Edificio</th>
              <th>Unidad Responsable</th>
              <th>Responsable de Alta</th>
              <th>Fecha de Registro</th>
            </tr>
          </thead>
          <tbody>
            {% for edificio in edificios %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ edificio.nombre }}</td>
                <td>{{ edificio.unidad_responsable.nombre }}</td>
                <td>{{ edificio.responsable_alta|default:"-" }}</td>
                <td>{{ edificio.fecha_registro|date:"d/m/Y H:i:s" }}</td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="5" class="text-center">No hay edificios registrados.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>

{% endblock content %}